<template>
    <lightning-card>
        <template for:each={productsMapByCategory} for:item="category">
            <lightning-accordion key={category.key} allow-multiple-sections-open>
                    <lightning-accordion-section name={category.key} label={category.key}>
                        <lightning-datatable 
                            key-field="Id"
                            data={category.value}
                            hide-checkbox-column
                            column-widths-mode="auto"
                            columns={columns}
                            onrowaction={handleRowAction}
                        >
                        </lightning-datatable>
                    </lightning-accordion-section> 
            </lightning-accordion>
        </template>


            
        <c-modal-edit-form onrecordcreatedoredited={handleRecordCreatedOrEdited}></c-modal-edit-form>
        <template if:true={errors}>
            <p> {errors} </p>
        </template>
    </lightning-card>
</template>